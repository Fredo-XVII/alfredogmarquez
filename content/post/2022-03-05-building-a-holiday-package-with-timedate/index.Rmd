---
title: "Building a Holiday Package with timeDate"
author: "Alfredo G Marquez"
date: "3/6/2022"
output: html_document
slug: building-a-holiday-package-with-timedate
categories:
  - R
  - Package Building
tags:
  - US Retail Holidays
  - holiday.dates
  - timeDate
  - r package
keywords:
  - R Package Holiday Dates
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

**Coming Soon**

### Introduction

It has been a while since my last post.  You can probably imagine why with all that is going on in the world these days.  Today I will talk about using the `timeDate` package to build custome dates for any project.

### Data Problem

In my work to build time series models I need to account for the seasonality that occurs in retail.  I discovered the `timeDate` package from another team at work.  After playing with the functions in the package for a bit, I realized how flexible the functions in the package can be to building custom holiday dates.

### The timeDate Package

Source: https://cran.r-project.org/web/packages/timeDate/timeDate.pdf

There are many useful functions in the `timeDate` package.  Today, I will only focus on a couple that allowed me to create custom dates that are important to my forecasting work.

First, I don't want to reproduce a holiday that already exists in the `timeDate` package.  Lets check to see what holidays are available in the `timeDate` package.

```{r}
timeDate::listHolidays()
```

From the list above we can see that the Valentine holiday is not included in the `timeDate` package.  We can build a custome function by copying one of the functions from the `timeDate` package and changing it to meet our needs.   

One type of function builds dates based on the year and the number of days from the beginning of the year.  For example, if we look at how the `timeDate::NewYearsDay` function is built gives us template on how to create a holiday based on number of days in a year from the beginning of the year.

```{r}
timeDate::NewYearsDay
```
We are going to change the 101 in the function above to 0214.  I like including the `0` because it feels more like a date when you look at the function.  The new USValentinesDay function is defined below.

```{r}
USValentinesDay <-
  function(year = timeDate::getRmetricsOptions("currentYear")) {
    ans = year*10000 + 0214
    timeDate::timeDate(as.character(ans)) }
```

The `year` argument for the function allows you to select any year to get the date for Valentines.  For example, for 2022 I would expect to get 2022-02-14 for Valentines day.  Lets try it with a vector of years:

```{r}
USValentinesDay(year = c(2019,2020,2021,2022))
```











 

