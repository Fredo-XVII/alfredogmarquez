yoy_perc = (total/dplyr::lag(total) - 1)*100,
) %>%
tsibble::as_tsibble(index = year)
R_gtrends <- gtrendsR::gtrends(c("R",'r'))
r_trends_t <- R_gtrends$interest_over_time %>%
dplyr::mutate(yr_wk = tsibble::yearweek(date),
hits_q = as.numeric(hits))
r_trends_tot_wk <- r_trends_t %>%
dplyr::group_by(yr_wk) %>%
dplyr::summarise(total = sum(hits_q))
r_trends_tot_wk %>% ggplot(aes(x = yr_wk, y = total)) +
geom_line()
R_gtrends <- gtrendsR::gtrends(c("R",'r','dplyr','tidyverse'))
r_trends_t <- R_gtrends$interest_over_time %>%
dplyr::mutate(yr_wk = tsibble::yearweek(date),
hits_q = as.numeric(hits))
r_trends_tot_wk <- r_trends_t %>%
dplyr::group_by(yr_wk) %>%
dplyr::summarise(total = sum(hits_q))
r_trends_tot_wk %>% ggplot(aes(x = yr_wk, y = total)) +
geom_line()
r_trends_tot_wk <- r_trends_t %>%
dplyr::group_by(yr_wk) %>%
dplyr::summarise(total = sum(hits_q))
r_trends_tot_wk %>% ggplot(aes(x = yr_wk, y = total)) +
geom_line()
r_trends_tot_wk <- r_trends_t %>%
dplyr::group_by(yr_wk) %>%
dplyr::summarise(total = sum(hits_q))
r_trends_t %>% head()
r_trends_tot_wk <- r_trends_t %>%
dplyr::group_by(yr_wk) %>%
dplyr::summarise(total = sum(hits_q))
View(r_trends_tot_wk)
r_trends_tot_wk <- r_trends_t %>%
dplyr::group_by(yr_wk) %>%
dplyr::summarise(total = sum(hits_q))
r_trends_tot_wk <- r_trends_t %>%
dplyr::group_by(yr_wk) %>%
dplyr::summarise(total = sum(hits))
r_trends_t %>% tail()
r_trends_tot_wk <- r_trends_t %>%
dplyr::group_by(yr_wk) %>%
dplyr::summarise(total = sum(hits_q, na.rm = TRUE))
r_trends_tot_wk %>% ggplot(aes(x = yr_wk, y = total)) +
geom_line()
r_trends_t %>% filter(keyword == 'tidyverse')
down_tot_by_yr %>%
ggplot(aes(x = year, y = total, color = year)) +
geom_line()
down_tot_by_yr %>%
ggplot(aes(x = year, y = total, color = year)) +
geom_line() +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red")
# What does the trend look like by os
down_tot_by_os <- cran_R_downloads %>%
dplyr:: group_by(yr_wk,os_factor) %>%
dplyr::summarise(total = sum(count))
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = total, col = os_factor, group = os_factor)) +
geom_line() +
facet_wrap(.~os_factor)
summary(down_tot_by_os)
down_tot_by_os %>% dplyr::group_by() %>% summarise()
down_tot_by_os %>% dplyr::group_by() %>% summary()
down_tot_by_os %>% dplyr::group_by(os_factor) %>% summary()
down_tot_by_os %>% dplyr::group_by(os_factor) %>% summarise_all()
down_tot_by_os %>% dplyr::group_by(os_factor) %>% summarise_all(mean)
# What does the trend look like by os
down_tot_by_os <- cran_R_downloads %>%
dplyr:: group_by(yr_wk,os_factor) %>%
dplyr::summarise(total = sum(count)) %>%
dplyr::mutate(yoy = total/dplyr::lag(total),
yoy_perc = (total/dplyr::lag(total,n = 52) - 1)*100,
)
head(down_tot_by_os)
tail(down_tot_by_os)
# What does the trend look like by os
down_tot_by_os <- cran_R_downloads %>%
dplyr:: group_by(os_factor,yr_wk) %>%
dplyr::summarise(total = sum(count)) %>%
dplyr::mutate(yoy = total/dplyr::lag(total, n = 52),
yoy_perc = (total/dplyr::lag(total,n = 52) - 1)*100,
)
tail(down_tot_by_os)
head(down_tot_by_os)
View(down_tot_by_os)
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_wrap(.~os_factor)
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_wrap(.~os_factor, scales = 'free')
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_wrap(os_factor~., scales = 'free')
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free')
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red")
R_ver_hist
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = total, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red")
library(gridExtra)
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = total, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") -> g_os_lvl
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") -> g_os_yoy
gridExtra::grid.arrange(g_os_lvl, g_os_yoy)
R_ver_hist <- R_ver_hist_raw %>% dplyr::select(-date) %>%
dplyr::mutate(greg_d = lubridate::as_date(vers_d),
vers_i = forcats::as_factor(version),
nickname = forcats::as_factor(nickname),
yr_wk_ver = tsibble::yearweek(as.Date(greg_d))
) %>%
dplyr::select(vers_i,nickname,greg_d,yr_wk_ver) %>%
dplyr::filter(greg_d >= as.Date('2015-01-01'))
g_os_lvl <- down_tot_by_os %>% ggplot(aes(x = yr_wk, y = total, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red")
g_os_yoy <- down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red")
gridExtra::grid.arrange(g_os_lvl, g_os_yoy)
g_os_yoy <- down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red")
gridExtra::grid.arrange(g_os_lvl, g_os_yoy)
colnames(R_ver_hist)
g_os_yoy <- down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data = R_ver_hist, aes(label=vers_i),hjust=0, vjust=0)
g_os_yoy
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data = R_ver_hist, aes(label=vers_i),hjust=0, vjust=0)
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red")
g_os_yoy <- down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data = R_ver_hist, aes(label=as.character(vers_i)),hjust=0, vjust=0)
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data = R_ver_hist, aes(label=as.character(vers_i)),hjust=0, vjust=0)
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = .$os_factor)) +
geom_line() +
facet_grid(.$os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data = R_ver_hist, aes(label=as.character(vers_i)),hjust=0, vjust=0)
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_label_repel(R_ver_hist, aes(label = vers_i),
box.padding   = 0.35,
point.padding = 0.5,
segment.color = 'grey50') +
theme_classic()
library(ggrepel)
install.packages("ggrepel")
library(ggrepel)
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_label_repel(R_ver_hist, aes(label = vers_i),
box.padding   = 0.35,
point.padding = 0.5,
segment.color = 'grey50') +
theme_classic()
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_label_repel(R_ver_hist, aes(label = vers_i),
box.padding   = 0.35,
point.padding = 0.5,
segment.color = 'grey50')
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_label_repel(aes(label = vers_i),
box.padding   = 0.35,
point.padding = 0.5,
segment.color = 'grey50')
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_label_repel(aes(label = forcats::fct_explicit_na(vers_i)),
box.padding   = 0.35,
point.padding = 0.5,
segment.color = 'grey50')
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_label_repel(aes(label = forcats::fct_explicit_na(R_ver_hist$vers_i)),
box.padding   = 0.35,
point.padding = 0.5,
segment.color = 'grey50')
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_label_repel(aes(label = R_ver_hist$vers_i),
box.padding   = 0.35,
point.padding = 0.5,
segment.color = 'grey50')
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_label(data = R_ver_hist, aes(label = vers_i))
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data = R_ver_hist, aes(label = vers_i))
g_os_yoy <- down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data=R_ver_hist, mapping=aes(x=greg_d, y=0, label=vers_i), size=4, angle=90, vjust=-0.4, hjust=0) +
theme_classic()
down_tot_by_os %>% ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data=R_ver_hist, mapping=aes(x=greg_d, y=0, label=vers_i), size=4, angle=90, vjust=-0.4, hjust=0) +
theme_classic()
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = yoy_perc, col = down_tot_by_os$os_factor, group = down_tot_by_os$os_factor)) +
geom_line() +
facet_grid(down_tot_by_os$os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data=R_ver_hist, mapping=aes(x=greg_d, y=0, label=vers_i), size=4, angle=90, vjust=-0.4, hjust=0) +
theme_classic()
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = yoy_perc, col = down_tot_by_os$os_factor, group = down_tot_by_os$os_factor)) +
geom_line() +
facet_grid(down_tot_by_os$os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red")
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, mapping = aes(xintercept = greg_d), linetype = 4, color = "red")
R_ver_hist
str(R_ver_hist)
as.character(R_ver_hist$vers_i)
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, mapping = aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data=R_ver_hist, mapping=aes(x=greg_d, y=0, label=as.character(R_ver_hist$vers_i)), size=4, angle=90, vjust=-0.4, hjust=0) +
theme_classic()
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, mapping = aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data=R_ver_hist, mapping=aes(x=R_ver_hist$greg_d, y=0, label=as.character(R_ver_hist$vers_i)),
size=4, angle=90, vjust=-0.4, hjust=0) +
theme_classic()
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, mapping = aes(xintercept = greg_d), linetype = 4, color = "red")
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, mapping = aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data=R_ver_hist, mapping=aes(x=R_ver_hist$greg_d, y=0, label=as.character(R_ver_hist$vers_i)),
size=4, angle=90, vjust=-0.4, hjust=0)
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = total, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data=R_ver_hist, mapping=aes(x=R_ver_hist$greg_d, y=0, label=as.character(R_ver_hist$vers_i)),
size=4, angle=90, vjust=-0.4, hjust=0)
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = total, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red")
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = total, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data=R_ver_hist, mapping=aes(x=R_ver_hist$greg_d, y=0, label=as.character(R_ver_hist$vers_i)),
size=4, angle=90, vjust=-2.0, hjust=0)
R_ver_hist <- R_ver_hist_raw %>% dplyr::select(-date) %>%
dplyr::mutate(greg_d = lubridate::as_date(vers_d),
vers_i = forcats::as_factor(version),
nickname = forcats::as_factor(nickname),
yr_wk_ver = tsibble::yearweek(as.Date(greg_d))
) %>%
dplyr::select(version,vers_i,nickname,greg_d,yr_wk_ver) %>%
dplyr::filter(greg_d >= as.Date('2015-01-01')) %>%
dplyr::filter(vers_i %in% c("3.2.0","3.3.0","3.4.0","3.5.0","3.5.1","3.5.2","3.6.0"))
R_ver_hist
R_ver_hist <- R_ver_hist_raw %>% dplyr::select(-date) %>%
dplyr::mutate(greg_d = lubridate::as_date(vers_d),
vers_i = forcats::as_factor(version),
nickname = forcats::as_factor(nickname),
yr_wk_ver = tsibble::yearweek(as.Date(greg_d))
) %>%
dplyr::select(version,vers_i,nickname,greg_d,yr_wk_ver) %>%
dplyr::filter(greg_d >= as.Date('2015-01-01'))# %>%
R_ver_hist
g_os_lvl <- down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = total, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data=R_ver_hist, mapping=aes(x=greg_d, y=0, label=version),
size=4, angle=90, vjust=-2.0, hjust=0)
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = total, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data=R_ver_hist, mapping=aes(x=greg_d, y=0, label=version),
size=4, angle=90, vjust=-2.0, hjust=0)
colnames(down_tot_by_os)
g_os_yoy <- down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, mapping = aes(xintercept = greg_d), linetype = 4, color = "red") +
annotate(geom = "text", x=R_ver_hist$greg_d, y=0, label=as.character(R_ver_hist$vers_i),
size=4, angle=90, vjust=-0.4, hjust=0)
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, mapping = aes(xintercept = greg_d), linetype = 4, color = "red") +
annotate(geom = "text", x=R_ver_hist$greg_d, y=0, label=as.character(R_ver_hist$vers_i),
size=4, angle=90, vjust=-0.4, hjust=0)
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, mapping = aes(xintercept = greg_d), linetype = 4, color = "red") +
annotate(geom = "text", x=R_ver_hist$greg_d, y=0, label=R_ver_hist$version)
R_ver_hist
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = yoy_perc, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_hline(yintercept = 0) +
geom_vline(data = R_ver_hist, mapping = aes(xintercept = greg_d), linetype = 4, color = "red") +
annotate(geom = "text", x=R_ver_hist$yr_wk, y=0, label=R_ver_hist$version)
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = total, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_text(data=R_ver_hist, mapping=aes(x=yr_wk, y=0, label=version),
size=4, angle=90, vjust=-2.0, hjust=0)
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = total, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = yr_wk), linetype = 4, color = "red") +
geom_text(data=R_ver_hist, mapping=aes(x=yr_wk, y=0, label=version),
size=4, angle=90, vjust=-2.0, hjust=0)
R_ver_hist
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = total, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = yr_wk_ver), linetype = 4, color = "red") +
geom_text(data=R_ver_hist, mapping=aes(x=yr_wk, y=0, label=version),
size=4, angle=90, vjust=-2.0, hjust=0)
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = total, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = yr_wk_ver), linetype = 4, color = "red") +
geom_text(data=R_ver_hist, mapping=aes(x=yr_wk_ver, y=0, label=version),
size=4, angle=90, vjust=-2.0, hjust=0)
down_tot_by_os %>%
ggplot(aes(x = yr_wk, y = total, col = os_factor, group = os_factor)) +
geom_line() +
facet_grid(os_factor~., scales = 'free') +
geom_vline(data = R_ver_hist, aes(xintercept = yr_wk_ver), linetype = 4, color = "red")
R_ver_hist <- R_ver_hist_raw %>% dplyr::select(-date) %>%
dplyr::mutate(greg_d = lubridate::as_date(vers_d),
vers_i = forcats::as_factor(version),
nickname = forcats::as_factor(nickname),
yr_wk_ver = tsibble::yearweek(as.Date(greg_d))
) %>%
dplyr::select(version,vers_i,nickname,greg_d,yr_wk_ver) %>%
dplyr::filter(greg_d >= as.Date('2015-01-01')) %>%
dplyr::filter(!vers_i %in% c("3.2.0","3.3.0","3.4.0","3.5.0","3.6.0"))
R_ver_hist <- R_ver_hist_raw %>% dplyr::select(-date) %>%
dplyr::mutate(greg_d = lubridate::as_date(vers_d),
vers_i = forcats::as_factor(version),
nickname = forcats::as_factor(nickname),
yr_wk_ver = tsibble::yearweek(as.Date(greg_d))
) %>%
dplyr::select(version,vers_i,nickname,greg_d,yr_wk_ver) %>%
dplyr::filter(greg_d >= as.Date('2015-01-01')) %>%
dplyr::filter(!vers_i %in% c("3.2.0","3.3.0","3.4.0","3.5.0","3.6.0"))
R_ver_hist_major <- R_ver_hist %>%
dplyr::filter(vers_i %in% c("3.2.0","3.3.0","3.4.0","3.5.0","3.6.0"))
down_tot_by_d %>%
ggplot(aes(x = yr_wk, y = total, color = greg_d)) +
geom_line() +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_vline(data = R_ver_hist_major, aes(xintercept = greg_d), linetype = 1, color = "blue")
down_tot_by_d %>%
ggplot(aes(x = yr_wk, y = total, color = greg_d)) +
geom_line() +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_vline(data = R_ver_hist_major, aes(xintercept = greg_d), linetype = 2, color = "blue")
R_ver_hist_major
R_ver_hist <- R_ver_hist_raw %>% dplyr::select(-date) %>%
dplyr::mutate(greg_d = lubridate::as_date(vers_d),
vers_i = forcats::as_factor(version),
nickname = forcats::as_factor(nickname),
yr_wk_ver = tsibble::yearweek(as.Date(greg_d))
) %>%
dplyr::select(version,vers_i,nickname,greg_d,yr_wk_ver) %>%
dplyr::filter(greg_d >= as.Date('2015-01-01')) # %>%
R_ver_hist_major <- R_ver_hist %>%
dplyr::filter(vers_i %in% c("3.2.0","3.3.0","3.4.0","3.5.0","3.6.0"))
R_ver_hist_major
down_tot_by_d %>%
ggplot(aes(x = yr_wk, y = total, color = greg_d)) +
geom_line() +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_vline(data = R_ver_hist_major, aes(xintercept = greg_d), linetype = 2, color = "blue")
down_tot_by_d %>%
ggplot(aes(x = yr_wk, y = total, color = greg_d)) +
geom_line() +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_vline(data = R_ver_hist_major, aes(xintercept = greg_d), linetype = 1, color = "blue")
R_ver_hist
down_tot_by_d %>%
ggplot(aes(x = yr_wk, y = total, color = greg_d)) +
geom_line() +
labs(x = 'Week', y = 'Weekly Downloads')
down_tot_by_d %>%
ggplot(aes(x = yr_wk, y = total, color = greg_d)) +
geom_line() +
labs(x = 'Week', y = 'Weekly Downloads') +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red") +
geom_vline(data = R_ver_hist_major, aes(xintercept = greg_d), linetype = 1, color = "blue")
down_tot_by_d %>%
ggplot(aes(x = yr_wk, y = total, color = greg_d)) +
geom_line() +
labs(x = 'Week', y = 'Weekly Downloads') +
geom_vline(data = R_ver_hist, aes(xintercept = greg_d), linetype = 4, color = "red", alpha = 0.5) +
geom_vline(data = R_ver_hist_major, aes(xintercept = greg_d), linetype = 1, color = "blue")
